var Trogdor=function(){var i=document,l=window,g=-1,n,m,j,o,k;function a(d){if(d&&(d.nodeType||d.item)){return d}return i.getElementById(d)}function f(p,d,q){p=a(p);if(!p){return}if(l.addEventListener){p.addEventListener(d,q,false)}else{if(l.attachEvent){p.attachEvent("on"+d,q)}}}function e(d){if(d.preventDefault){d.preventDefault()}else{if(d.returnValue){d.returnValue=false}}}function h(s){if(!s||!s.ysearchresponse){return}var r="",q=s.ysearchresponse.resultset_web,p,d;if(q&&q.length){for(p=0;p<q.length;++p){d=q[p];r+='<li class="res"><h3><a href="'+d.clickurl+'">'+d.title+'</a></h3><div class="abstract">'+d["abstract"]+"</div><cite>"+d.dispurl+"</cite></li>"}}else{r="<li>No results</li>"}j.innerHTML=r}function c(p,d){var q;for(q in d){if(d.hasOwnProperty(q)){p=p.replace("{"+q+"}",d[q])}}return p}function b(p){p=p||l.event;switch(p.keyCode){case 27:e(p);g=-1;m.focus();break;case 38:e(p);if(g-1<=-1){g=-1;m.focus()}else{g-=1;try{j.childNodes[g].firstChild.firstChild.focus()}catch(d){g+=1}}break;case 40:e(p);if(g+1<j.childNodes.length){g+=1;try{j.childNodes[g].firstChild.firstChild.focus()}catch(d){g-=1}}break}}o={BOSS_URL:"http://boss.yahooapis.com/ysearch/web/v1/{query}?appid={appid}&format=jsonp&callback={callback}",results:{},init:function(q,r,p){var d;n=q;m=a(r);j=a(p);if(!m.value){if(d=l.location.search.match(/(?:\?|&)q=([^&]+)/)){m.value=decodeURIComponent(d[1].replace(/\+/g," "))}}if(m.value){o.search(m.value)}f(m,"keyup",function(){o.search(m.value)});f(m,"focus",function(){g=-1});f(i,"keydown",b);m.focus()},search:function(d){d=d.replace(/^\s+|\s+$/g,"");if(!d){return}if(o.results.hasOwnProperty(d)){h(o.results[d]);return}if(k){k.parentNode.removeChild(k)}k=i.createElement("script");k.src=c(o.BOSS_URL,{appid:encodeURIComponent(n),callback:"Trogdor.response",query:encodeURIComponent(d)});o.response=function(p){o.results[d]=p;h(p);if(k){k.parentNode.removeChild(k);k=null}};i.body.appendChild(k)}};return o}();