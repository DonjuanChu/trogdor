var Trogdor=function(){var j=document,l=window,h=-1,n,m,k,o,a;function b(d){if(d&&(d.nodeType||d.item)){return d}return j.getElementById(d)}function g(p,d,q){p=b(p);if(!p){return}if(l.addEventListener){p.addEventListener(d,q,false)}else{if(l.attachEvent){p.attachEvent("on"+d,q)}}}function f(d){if(d.preventDefault){d.preventDefault()}else{if(d.returnValue){d.returnValue=false}}}function i(t,s){if(!t||!s||!s.ysearchresponse){return}var r="",q=s.ysearchresponse.resultset_web,p,d;if(q&&q.length){for(p=0;p<q.length;++p){d=q[p];r+='<li class="res"><h3><a href="'+d.clickurl+'">'+d.title+'</a></h3><div class="abstract">'+d["abstract"]+"</div><cite>"+d.dispurl+"</cite></li>"}}else{r="<li>No results</li>"}k.innerHTML=r}function e(p,d){var q;for(q in d){if(d.hasOwnProperty(q)){p=p.replace("{"+q+"}",d[q])}}return p}function c(p){p=p||l.event;switch(p.keyCode){case 27:f(p);h=-1;m.focus();break;case 38:f(p);if(h-1<=-1){h=-1;m.focus()}else{h-=1;try{k.childNodes[h].firstChild.firstChild.focus()}catch(d){h+=1}}break;case 40:f(p);if(h+1<k.childNodes.length){h+=1;try{k.childNodes[h].firstChild.firstChild.focus()}catch(d){h-=1}}break}}o={BOSS_URL:"http://boss.yahooapis.com/ysearch/web/v1/{query}?appid={appid}&format=jsonp&callback={callback}",results:{},init:function(q,r,p){var d;n=q;m=b(r);k=b(p);if(!m.value){if(d=l.location.search.match(/(?:\?|&)q=([^&]+)/)){m.value=decodeURIComponent(d[1].replace(/\+/g," "))}}if(m.value){o.search(m.value)}g(m,"keyup",function(){o.search(m.value)});g(m,"focus",function(){h=-1});g(j,"keydown",c);m.focus()},search:function(p){p=p.replace(/^\s+|\s+$/g,"");if(!p){return}if(o.results.hasOwnProperty(p)){o.results[p]();return}var d=j.createElement("script");d.src=e(o.BOSS_URL,{appid:encodeURIComponent(n),callback:encodeURIComponent("Trogdor.results['"+p.replace(/'/g,"\\'")+"']").replace(/'/g,"%27"),query:encodeURIComponent(p)});o.results[p]=function(q){if(q){arguments.callee.data=q}i(p,arguments.callee.data);if(d){d.parentNode.removeChild(d);d=null}};j.body.appendChild(d)}};return o}();